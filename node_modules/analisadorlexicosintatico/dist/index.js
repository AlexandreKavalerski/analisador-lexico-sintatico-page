"use strict";
exports.__esModule = true;
var lexico_1 = require("./lexico");
var sintatico_1 = require("./sintatico");
function analisador(entrada) {
  entrada = entrada.trim();
  var tabela_tokens = lexico_1.analisadorLexico(entrada);
  if (tabela_tokens) {
    var resultLexico = lexicamente(tabela_tokens);
    if (resultLexico.status === "erro") {
      return result(resultLexico.msg);
    }
    try {
      var tree = sintatico_1.fillTree(tabela_tokens);
      var resultInOrdem = tree.raiz.visitInOrdem().trim();
      if (resultInOrdem === entrada) {
        return result("Sentença léxica e sintaticamente correta!", 1);
      }
      else {
        return result("Sentença sintaticamente incorreta!");
      }
    }
    catch (erro) {
      return result("Sentença sintaticamente incorreta!");
    }
  }
}
exports.verificaSentenca = analisador;
function lexicamente(tb_tokens) {
  for (var _i = 0, tb_tokens_1 = tb_tokens; _i < tb_tokens_1.length; _i++) {
    var infoToken = tb_tokens_1[_i];
    if (infoToken.identificador === "-") {
      return { msg: "Erro l\u00E9xico: Token '" + infoToken.token + "' n\u00E3o existe na gram\u00E1tica!", status: 'erro' };
    }
  }
  return { msg: "Senten\u00E7a lexicamente correta!", status: 'ok' };
}
function result(mensagem, status) {
  if (status === void 0) { status = 0; }
  if (status === 0) {
    return { msg: mensagem, status: "erro" };
  }
  else {
    return { msg: mensagem, status: "ok" };
  }
}
